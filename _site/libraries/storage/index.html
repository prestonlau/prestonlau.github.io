<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Storage SDK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/images/logo/omh_logo.png">
  <!-- Google Fonts CDN -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <!-- Self host font -->
  <!-- <link rel="preload" href="/assets/fonts/playfair-display.woff2" as="font" type="font/woff2" crossorigin> -->
  <link href="/assets/css/style.css" rel="stylesheet">
  
  <meta name="description" content="The OMH Storage Client Library would allow users to support file management and app backup services in a seamless way, regardless of the types of devices or the OS platforms. The file management feature supports file upload, retrieval, update, and deletion of files and folders. The OMH SDK enables Apps running on all types of devices to backup data with storage and backup providers like Google Drive." />
  <meta property="og:title" content="Storage SDK"/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content=""/>
  
  <meta property="og:description" content="The OMH Storage Client Library would allow users to support file management and app backup services in a seamless way, regardless of the types of devices or the OS platforms. The file management feature supports file upload, retrieval, update, and deletion of files and folders. The OMH SDK enables Apps running on all types of devices to backup data with storage and backup providers like Google Drive."/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content=""/>
  <meta name="twitter:creator" content=""/>

</head>

<body class='page page-libraries'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  
  <ul>
    
    <li class="">
      <a href="/">Home</a>
    </li>
    
    <li class="">
      <a href="/libraries/">SDK & Plugins</a>
    </li>
    
    <li class="">
      <a href="/benefits/">Benefits</a>
    </li>
    
    <li class="">
      <a href="/blogs/">Blog</a>
    </li>
    
    <li class="">
      <a href="/contact/">Contact</a>
    </li>
    
  </ul>
</div>

  <div id="wrapper" class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="/"><img width="60px" height="60px" alt="Open Mobile Hub" src="/images/logo/omh_logo.png" />Open Mobile Hub</a>
    </div>
    <div class="logo-mobile">
      <a href="/"><img width="60px" height="60px" alt="Open Mobile Hub" src="/images/logo/omh_logo.png" />Open Mobile Hub</a>
    </div>
    <div id="main-menu" class="main-menu">
  
  <ul>
    
    <li class="">
      <a href="/">Home</a>
    </li>
    
    <li class="active">
      <a href="/libraries/">SDK & Plugins</a>
    </li>
    
    <li class="">
      <a href="/benefits/">Benefits</a>
    </li>
    
    <li class="">
      <a href="/blogs/">Blog</a>
    </li>
    
    <li class="">
      <a href="/contact/">Contact</a>
    </li>
    
  </ul>
</div>

    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button" aria-label="Mobile Menu">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>

    <div class="libraries bg1">
  <div class="container">
    <div class="row justify-content-start">
      <div class="col-12 col-md-7 col-lg-6 order-2 order-md-1">
        <h1>Storage SDK</h1>
        <p>The OMH Storage Client Library would allow users to support file management and app backup services in a seamless way, regardless of the types of devices or the OS platforms. The file management feature supports file upload, retrieval, update, and deletion of files and folders. The OMH SDK enables Apps running on all types of devices to backup data with storage and backup providers like Google Drive.</p>
      </div>
      
    </div>
  </div>
</div>

<div class="intro">
  <div class="container">
    <div class="row justify-content-start">
      <div class="col-12 col-md-12 col-lg-12 order-1 order-md-1">
      <div class="library library-single">
        <ul>
<li><a href="#singlecodebase">A single codebase</a></li>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#sample-app">Sample App</a></li>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>
<p><br />
<br /></p>
<style>
  .container img.standard-image {
    /* Styles for the standard-size image */
    width: 70%; /* Set the desired width here */
    display: block;
    margin: 0 auto;
  }

  .container img.small-image {
    width: 12%;
    display: block;
    margin: 0 auto;
  }
</style>

<h1 id="singlecodebase">A single codebase, running seamlessly on any device</h1>

<p>OMH Storage is a client library that makes it easy to integrate storage on all types of devices, running differnet OS platforms. It eliminates the need for separate codebases for different app builds.</p>

<p>With the OMH Storage Client Library, you can easily add Google Drive and other third-party storage to your applications, regardless of its device types or its OS platforms. The library takes care of the technical details, providing a unified interface and components for a consistent storage experience.</p>

<p>For instance, the following screenshots showcase multiple devices with Android, both with GMS and Non-GMS. The same app works without changing a single line of code, supporting multiple storage provider implementations.</p>

<div class="container pt-6 pb-6">
  <div class="row">
      <div class="col-12 col-md-6 mb-3">
       <div>
         <div>
           <h2 align="center">Non-GMS Device</h2>
           <video width="80%" autoplay="" loop="" src="/images/features/storage/storage-nongms-demo.mp4" controls="" title="Storage non-GMS"></video>
         </div>
       </div>
      </div>
      <div class="col-12 col-md-6 mb-3">
       <div>
         <div>
           <h2 align="center">GMS Device</h2>
           <video width="90%" autoplay="" loop="" src="/images/features/storage/storage-gms-demo.mp4" controls="" title="Storage GMS"></video>
         </div>
       </div>
      </div>
  </div>
  <div>
    <a href="https://github.com/openmobilehub/omh-storage">
    <img src="/images/main/github-mark/github-mark.png" alt="OMH" class="small-image" align="center" />
  </a>
  <p align="center">Fork our samples and try them yourself.</p>
  </div>
</div>

<h1 id="getting-started">Getting started</h1>
<p>This section describes how to setup an Android Studio project to use the OMH Storage SDK for Android. For greater ease, a base code will be used within the repository.</p>

<p><strong>Note: To quickly run a full-featured app with all OMH Storage functionality, refer to the <a href="#sample-app"><code class="language-plaintext highlighter-rouge">Sample App</code></a> section and follow the provided steps.</strong></p>

<h2 id="set-up-the-development-environment">Set up the development environment</h2>
<ol>
  <li>Android Studio is required. If you haven’t already done so, <a href="https://developer.android.com/studio/index.html">download</a> and <a href="https://developer.android.com/studio/install.html?pkg=studio">install</a> it.</li>
  <li>Ensure that you are using the <a href="https://developer.android.com/studio/releases/gradle-plugin">Android Gradle plugin</a> version 7.0 or later in Android Studio.</li>
</ol>

<h2 id="clone-the-repository">Clone the repository</h2>
<p>To clone the repository and checkout the <code class="language-plaintext highlighter-rouge">code-starter</code> branch, use the following command in your Terminal:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   git clone --branch code-starter https://github.com/openmobilehub/omh-storage.git omh-storage-starter-code
</code></pre></div></div>

<h2 id="set-up-your-google-cloud-project-for-applications-with-google-services-google-auth">Set up your Google Cloud project for applications with Google Services (Google Auth)</h2>
<p>To access Google APIs, generate a unique client_id for your app in the Google API Console, for additional information <a href="https://github.com/openmobilehub/omh-auth">see</a>. Add the client_id to your app’s code and complete the required Cloud Console setup steps:</p>

<h3 id="steps">Steps</h3>
<ol>
  <li><a href="https://console.cloud.google.com/projectselector2/home/dashboard?utm_source=Docs_ProjectSelector&amp;_gl=1*1ylhfe0*_ga*MTUwMDIzODY1Ni4xNjc1OTYyMDgw*_ga_NRWSTWS78N*MTY4MjA4ODIyNS44NS4xLjE2ODIwODgyMzcuMC4wLjA.">Go to the Google Cloud Console and open the project selector page.</a></li>
  <li>Click on “Create Project” to start creating a new Cloud project.</li>
  <li><a href="https://console.cloud.google.com/apis/credentials">Go to the Credentials page</a>.</li>
  <li>On the Credentials page, click on “Create credentials” and choose “OAuth Client ID”.</li>
  <li>In the “Application Type” option, select “Android”.</li>
  <li>
    <p>Set your application package name.</p>

    <p><strong>Note:</strong> If you are running the sample app or following the steps in the <code class="language-plaintext highlighter-rouge">code-starter</code> branch, use <code class="language-plaintext highlighter-rouge">com.omh.android.storage.sample</code>.</p>
  </li>
  <li>
    <p>Update the Android Client ID’s debug/release SHA-1 certificate fingerprint by running the following command in your terminal:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> keytool <span class="nt">-list</span> <span class="nt">-v</span> <span class="nt">-alias</span> androiddebugkey <span class="nt">-keystore</span> ~/.android/debug.keystore
</code></pre></div>    </div>

    <p><strong>Note:</strong> Use <code class="language-plaintext highlighter-rouge">android</code> as the default password. For instructions on other operating systems, refer to <a href="https://developers.google.com/android/guides/client-auth#using_keytool_on_the_certificate">these guidelines</a>.</p>
  </li>
  <li>In the <a href="https://console.cloud.google.com/apis/credentials/consent">OAuth consent screen</a> add the test users that you will be using for QA and development. Without this step you won’t be able to access the application while it’s in testing mode.</li>
  <li>Go to the <a href="https://console.cloud.google.com/apis/library">API library</a> section on the project you created</li>
  <li>Once there, make sure enable <a href="https://console.cloud.google.com/apis/library/drive.googleapis.com">Google Drive Api</a></li>
  <li>You’re all set!</li>
</ol>

<h2 id="add-the-client-id-to-your-app">Add the Client ID to your app</h2>
<p>You should not check your Client ID into your version control system, so it is recommended storing it in the <code class="language-plaintext highlighter-rouge">local.properties</code> file, which is located in the root directory of your project.
For more information about the <code class="language-plaintext highlighter-rouge">local.properties</code> file, see <a href="https://developer.android.com/studio/build#properties-files">Gradle properties</a> and <a href="https://developer.android.com/studio/build#properties-files">files</a>.</p>

<ol>
  <li>
    <p>Open the <code class="language-plaintext highlighter-rouge">local.properties</code> in your project level directory, and then add the following line:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CLIENT_ID = "YOUR_CLIENT_ID"
</code></pre></div>    </div>

    <p><em>Note:</em> Replace <code class="language-plaintext highlighter-rouge">YOUR_CLIENT_ID</code> with your API key client id.</p>
  </li>
  <li>
    <p>Save the file and <a href="https://developer.android.com/studio/build#sync-files">sync your project with Gradle</a>.</p>
  </li>
</ol>

<h2 id="gradle-configuration">Gradle configuration</h2>
<p>To incorporate OMH Storage into your project, you have two options: utilize the OMH Core Plugin or directly include the OMH Client libraries dependencies. This plugin simplifies the addition of Gradle dependencies, allowing you to effortlessly manage and include the necessary dependencies for seamless integration.</p>

<h3 id="add-omh-core-plugin">Add OMH Core plugin</h3>
<p>The subsequent instructions will outline the necessary steps for including the OMH Core Plugin as a Gradle dependency.</p>

<ol>
  <li>
    <p>In your <code class="language-plaintext highlighter-rouge">storage-starter-sample</code> module-level <code class="language-plaintext highlighter-rouge">build.gradle</code> under the <code class="language-plaintext highlighter-rouge">plugins</code> element add the plugin id. If you’re configuring this step by step on the <code class="language-plaintext highlighter-rouge">code-starter</code> branch, look for the comment <code class="language-plaintext highlighter-rouge">// Paste below this line the snippet of core plugin</code> and paste there the plugin id as shown on the next snippet:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plugins {
   ...
   id("com.openmobilehub.android.omh-core")
}
</code></pre></div>    </div>
  </li>
  <li>
    <p>Save the file and <a href="https://developer.android.com/studio/build#sync-files">sync Project with Gradle Files</a>.</p>
  </li>
</ol>

<h3 id="configure-the-omh-core-plugin">Configure the OMH Core plugin</h3>

<p>In your <code class="language-plaintext highlighter-rouge">storage-starter-sample</code> module-level <code class="language-plaintext highlighter-rouge">build.gradle.kts</code> search the comment <code class="language-plaintext highlighter-rouge">// replace this block with README omhConfig snippet</code> and replace the block with this snippet:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   omhConfig {
       bundle("singleBuild") {
           storage() {
               gmsService {
                   dependency = "com.openmobilehub.android:storage-api-drive-gms:1.0.7-beta"
               }
               nonGmsService {
                   dependency = "com.openmobilehub.android:storage-api-drive-nongms:1.0.8-beta"
               }
           }
           auth {
               gmsService {
                   dependency = "com.openmobilehub.android:auth-api-gms:1.0.1-beta"
               }
               nonGmsService {
                   dependency = "com.openmobilehub.android:auth-api-non-gms:1.0.1-beta"
               }
           }
       }
       bundle("gms") {
           storage {
               gmsService {
                   dependency = "com.openmobilehub.android:storage-api-drive-gms:1.0.7-beta"
               }
           }
           auth {
               gmsService {
                   dependency = "com.openmobilehub.android:auth-api-gms:1.0.1-beta"
               }
           }
       }
       bundle("nongms") {
           storage {
               nonGmsService {
                   dependency = "com.openmobilehub.android:storage-api-drive-nongms:1.0.8-beta"
               }
           }
           auth {
               nonGmsService {
                   dependency = "com.openmobilehub.android:auth-api-non-gms:1.0.1-beta"
               }
           }
       }
   }
</code></pre></div></div>

<p><em><strong>NOTE: This section covers concepts about the core plugin</strong></em></p>

<p>In your “storage-starter-sample” module-level <code class="language-plaintext highlighter-rouge">build.gradle</code> file is required to configure the <code class="language-plaintext highlighter-rouge">omhConfig</code>. The <code class="language-plaintext highlighter-rouge">omhConfig</code> definition is used to extend the existing Android Studio variants in the core plugin. For more details about <code class="language-plaintext highlighter-rouge">omhConfig</code> see <a href="https://github.com/openmobilehub/omh-core/tree/release/1.0">OMH Core</a>.</p>

<h4 id="basic-configuration">Basic configuration</h4>
<p>In this step, you will define the OMH Core Plugin bundles to generate multiple build variants with specific suffixes as their names. For example, if your project has <code class="language-plaintext highlighter-rouge">release</code> and <code class="language-plaintext highlighter-rouge">debug</code> variants with <code class="language-plaintext highlighter-rouge">singleBuild</code>, <code class="language-plaintext highlighter-rouge">gms</code>, and <code class="language-plaintext highlighter-rouge">nonGms</code> OMH bundles, the following build variants will be generated:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">releaseSingleBuild</code>, <code class="language-plaintext highlighter-rouge">releaseGms</code>, and <code class="language-plaintext highlighter-rouge">releaseNonGms</code></li>
  <li><code class="language-plaintext highlighter-rouge">debugSingleBuild</code>, <code class="language-plaintext highlighter-rouge">debugGms</code>, and <code class="language-plaintext highlighter-rouge">debugNonGms</code></li>
</ul>

<h5 id="variant-singlebuild">Variant singleBuild</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Define the `Service`. In this example is storage.
- Define the `ServiceDetails`. In this example are `gmsService` and `nonGmsService`.
- Define the dependency and the path. In this example
  are `com.openmobilehub.android:storage-api-drive-gms:1.0-rc"`
  and `com.openmobilehub.android:storage-api-drive-nongms:1.0-rc`.
</code></pre></div></div>

<p><strong>Note:</strong> It’s important to observe how a single build encompasses both GMS (Google MobileServices) and Non-GMS configurations.</p>

<h5 id="variant-gms">Variant gms</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Define the `Service`. In this example is storage.
- Define the `ServiceDetails` . In this example is `gmsService`.
- Define the dependency and the path. In this example
  is `com.openmobilehub.android:storage-api-drive-gms:1.0-rc"`.
</code></pre></div></div>

<p><strong>Note:</strong> gms build covers only GMS (Google Mobile Services).</p>

<h5 id="variant-nongms">Variant nongms</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- Define the `Service`. In this example is storage.
- Define the `ServiceDetails` . In this example is `nonGmsService`.
- Define the dependency and the path. In this example
  is `com.openmobilehub.android:storage-api-drive-non-gms:1.0-rc`.
</code></pre></div></div>

<p><strong>Note:</strong> nongms build covers only Non-GMS configurations.</p>

<ol>
  <li>
    <p>Save and <a href="https://developer.android.com/studio/build#sync-files">sync Project with Gradle Files</a>.</p>
  </li>
  <li>
    <p>Rebuild the project to ensure the availability of <code class="language-plaintext highlighter-rouge">BuildConfig.AUTH_GMS_PATH</code>, <code class="language-plaintext highlighter-rouge">BuildConfig.AUTH_NON_GMS_PATH</code>, 
<code class="language-plaintext highlighter-rouge">BuildConfig.STORAGE_GMS_PATH</code> and <code class="language-plaintext highlighter-rouge">BuildConfig.STORAGE_NON_GMS_PATH</code> variables.</p>
  </li>
  <li>Now you can select a build variant. To change the build variant Android Studio uses, do one of the following:
    <ul>
      <li>Select “Build” &gt; “Select Build Variant…” in the menu.</li>
      <li>Select “View” &gt; “Tool Windows” &gt; “Build Variants” in the menu.</li>
      <li>Click the “Build Variants” tab on the tool window bar.</li>
    </ul>
  </li>
  <li>You can select any of the 3 variants for the <code class="language-plaintext highlighter-rouge">:storage-starter-sample</code>:
    <ul>
      <li>“singleBuild” variant builds for GMS (Google Mobile Services) and Non-GMS devices without
changes to the code.(Recommended)</li>
      <li>“gms” variant builds for devices that has GMS (Google Mobile Services).</li>
      <li>“nongms” variant builds for devices that doesn’t have GMS (Google Mobile Services).</li>
    </ul>
  </li>
  <li>
    <p>Go to the <code class="language-plaintext highlighter-rouge">providesOmhAuthClient</code> function in the <code class="language-plaintext highlighter-rouge">SingletonModule</code> file. Look for the comment <code class="language-plaintext highlighter-rouge">// Add here snippet for provide auth client</code>, and replace the existing code below this comment with the following snippet:</p>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="nc">OmhAuthProvider</span><span class="p">.</span><span class="nc">Builder</span><span class="p">()</span>
      <span class="p">.</span><span class="nf">addNonGmsPath</span><span class="p">(</span><span class="nc">BuildConfig</span><span class="p">.</span><span class="nc">AUTH_NON_GMS_PATH</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">addGmsPath</span><span class="p">(</span><span class="nc">BuildConfig</span><span class="p">.</span><span class="nc">AUTH_GMS_PATH</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">build</span><span class="p">()</span>
      <span class="p">.</span><span class="nf">provideAuthClient</span><span class="p">(</span>
          <span class="n">context</span> <span class="p">=</span> <span class="n">context</span><span class="p">,</span>
          <span class="n">scopes</span> <span class="p">=</span> <span class="nf">listOf</span><span class="p">(</span>
              <span class="s">"openid"</span><span class="p">,</span>
              <span class="s">"email"</span><span class="p">,</span>
              <span class="s">"profile"</span><span class="p">,</span>
              <span class="s">"https://www.googleapis.com/auth/drive"</span><span class="p">,</span>
              <span class="s">"https://www.googleapis.com/auth/drive.file"</span>
          <span class="p">),</span>
          <span class="n">clientId</span> <span class="p">=</span> <span class="nc">BuildConfig</span><span class="p">.</span><span class="nc">CLIENT_ID</span>
      <span class="p">)</span>
</code></pre></div>    </div>

    <p><strong>Note: Make sure to use the full implementation of <a href="https://github.com/openmobilehub/omh-storage/blob/release/1.0/storage-sample/src/main/java/com/omh/android/storage/sample/di/SingletonModule.kt#L36-L52"><code class="language-plaintext highlighter-rouge">providesOmhAuthClient</code></a> for a fully functional sample.</strong></p>
  </li>
  <li>
    <p>Go to the <code class="language-plaintext highlighter-rouge">providesOmhStorageClient</code> function in the <code class="language-plaintext highlighter-rouge">SingletonMOdule</code> file. Look for the comment <code class="language-plaintext highlighter-rouge">// Add here snippet for provide storage client</code>, and replace the existing code below this comment with the following snippet:</p>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="nc">OmhStorageProvider</span><span class="p">.</span><span class="nc">Builder</span><span class="p">()</span>
         <span class="p">.</span><span class="nf">addGmsPath</span><span class="p">(</span><span class="nc">BuildConfig</span><span class="p">.</span><span class="nc">STORAGE_GMS_PATH</span><span class="p">)</span>
         <span class="p">.</span><span class="nf">addNonGmsPath</span><span class="p">(</span><span class="nc">BuildConfig</span><span class="p">.</span><span class="nc">STORAGE_NON_GMS_PATH</span><span class="p">)</span>
         <span class="p">.</span><span class="nf">build</span><span class="p">()</span>
         <span class="p">.</span><span class="nf">provideStorageClient</span><span class="p">(</span><span class="n">omhAuthClient</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><strong>Note: Make sure to use the full implementation of <a href="https://github.com/openmobilehub/omh-storage/blob/release/1.0/storage-sample/src/main/java/com/omh/android/storage/sample/di/SingletonModule.kt#L55-L64"><code class="language-plaintext highlighter-rouge">providesOmhStorageClient</code></a> for a fully functional sample.</strong></p>
  </li>
</ol>

<h2 id="adding-storage-to-your-app">Adding Storage to your app</h2>
<p>First and foremost, the main interface that you’ll be interacting with is called OmhStorageClient. In contains all your basic storage functionalities: list, create, delete, download, update and upload files.</p>

<p>You can checkout the branch <code class="language-plaintext highlighter-rouge">code-starter</code> and copy/paste the following snippets in the right place or if you want to see the full implementation you can just see the <code class="language-plaintext highlighter-rouge">main</code> branch</p>

<h3 id="list-files">List files</h3>
<p>For list files, just use the instance you created of the <code class="language-plaintext highlighter-rouge">omhStorageClient</code> and call method <code class="language-plaintext highlighter-rouge">listFiles</code> sending as parameter the desired parent id.</p>

<p>If you are configuring this step by step on the <code class="language-plaintext highlighter-rouge">code-starter</code> branch:</p>

<ol>
  <li>
    <p>Go to the <code class="language-plaintext highlighter-rouge">refreshFileListEvent</code> function in the <code class="language-plaintext highlighter-rouge">FileViewerViewModel</code> file. Look for the comment <code class="language-plaintext highlighter-rouge">// Add here snippet for list files</code>, and replace the existing code below this comment with the following snippet:</p>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">cancellable</span> <span class="p">=</span> <span class="n">omhStorageClient</span><span class="p">.</span><span class="nf">listFiles</span><span class="p">(</span><span class="n">parentId</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">addOnSuccess</span> <span class="p">{</span> <span class="n">result</span><span class="p">:</span> <span class="nc">GetFilesListUseCaseResult</span> <span class="p">-&gt;</span>
                <span class="c1">// Get the files list</span>
                <span class="kd">val</span> <span class="py">filesList</span><span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">OmhFile</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">files</span>
                <span class="c1">// TODO - Developer: Manage success</span>
            <span class="p">}</span>
            <span class="p">.</span><span class="nf">addOnFailure</span> <span class="p">{</span> <span class="n">exception</span><span class="p">:</span> <span class="nc">Exception</span> <span class="p">-&gt;</span>
                <span class="c1">// TODO - Developer: Manage error</span>
            <span class="p">}</span>
            <span class="p">.</span><span class="nf">execute</span><span class="p">()</span>
<span class="n">cancellableCollector</span><span class="p">.</span><span class="nf">addCancellable</span><span class="p">(</span><span class="n">cancellable</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><strong>Note: Make sure to use the full implementation of <a href="https://github.com/openmobilehub/omh-storage/blob/release/1.0/storage-sample/src/main/java/com/omh/android/storage/sample/presentation/file_viewer/FileViewerViewModel.kt#L88-L113"><code class="language-plaintext highlighter-rouge">refreshFileListEvent</code></a> for a fully functional sample.</strong></p>
  </li>
  <li>
    <p>Run the sample app to see the list of files.</p>
  </li>
</ol>

<h3 id="create-files">Create files</h3>
<p>For create files, just use the instance you created of the <code class="language-plaintext highlighter-rouge">omhStorageClient</code> and call method <code class="language-plaintext highlighter-rouge">createFile</code> sending as parameter the desired name, mime type and parent id.</p>

<p>If you are configuring this step by step on the <code class="language-plaintext highlighter-rouge">code-starter</code> branch:</p>

<ol>
  <li>
    <p>Go to the <code class="language-plaintext highlighter-rouge">createFileEvent</code> function in the <code class="language-plaintext highlighter-rouge">FileViewerViewModel</code> file. Look for the comment <code class="language-plaintext highlighter-rouge">// Add here snippet for create files</code>, and replace the existing code below this comment with the following snippet:</p>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">val</span> <span class="py">cancellable</span> <span class="p">=</span> <span class="n">omhStorageClient</span><span class="p">.</span><span class="nf">createFile</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">mimeType</span><span class="p">,</span> <span class="n">parentId</span><span class="p">)</span>
             <span class="p">.</span><span class="nf">addOnSuccess</span> <span class="p">{</span> <span class="n">result</span><span class="p">:</span> <span class="nc">CreateFileUseCaseResult</span> <span class="p">-&gt;</span>
                <span class="c1">// An instance of OmhFile with the information of the created file. In case the file was not created, will be null</span>
                <span class="kd">val</span> <span class="py">file</span><span class="p">:</span> <span class="nc">OmhFile</span><span class="p">?</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">file</span>
                 <span class="c1">// TODO - Developer: Manage success</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">addOnFailure</span> <span class="p">{</span> <span class="n">exception</span><span class="p">:</span> <span class="nc">Exception</span> <span class="p">-&gt;</span>
                 <span class="c1">// TODO - Developer: Manage error</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">execute</span><span class="p">()</span>
 <span class="n">cancellableCollector</span><span class="p">.</span><span class="nf">addCancellable</span><span class="p">(</span><span class="n">cancellable</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><strong>Note: Make sure to use the full implementation of <a href="https://github.com/openmobilehub/omh-storage/blob/release/1.0/storage-sample/src/main/java/com/omh/android/storage/sample/presentation/file_viewer/FileViewerViewModel.kt#L221-L238"><code class="language-plaintext highlighter-rouge">createFileEvent</code></a> for a fully functional sample.</strong></p>
  </li>
  <li>
    <p>Run the sample app to create files.</p>
  </li>
</ol>

<h3 id="delete-files">Delete files</h3>
<p>For delete files, just use the instance you created of the <code class="language-plaintext highlighter-rouge">omhStorageClient</code> and call method <code class="language-plaintext highlighter-rouge">deleteFile</code> sending as parameter the id of the file you want to delete.</p>

<p>If you are configuring this step by step on the <code class="language-plaintext highlighter-rouge">code-starter</code> branch:</p>

<ol>
  <li>
    <p>Go to the <code class="language-plaintext highlighter-rouge">deleteFileEvent</code> function in the <code class="language-plaintext highlighter-rouge">FileViewerViewModel</code> file. Look for the comment <code class="language-plaintext highlighter-rouge">// Add here snippet for delete files</code>, and replace the existing code below this comment with the following snippet:</p>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">val</span> <span class="py">cancellable</span> <span class="p">=</span> <span class="n">omhStorageClient</span><span class="p">.</span><span class="nf">deleteFile</span><span class="p">(</span><span class="n">fileId</span><span class="p">)</span>
             <span class="p">.</span><span class="nf">addOnSuccess</span> <span class="p">{</span> <span class="n">result</span><span class="p">:</span> <span class="nc">DeleteFileUseCaseResult</span> <span class="p">-&gt;</span>
                <span class="c1">// The success variable indicates if the file was deleted or not</span>
                <span class="kd">val</span> <span class="py">success</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">isSuccess</span>
                 <span class="c1">// TODO - Developer: Manage success</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">addOnFailure</span> <span class="p">{</span> <span class="n">exception</span><span class="p">:</span> <span class="nc">Exception</span> <span class="p">-&gt;</span>
                 <span class="c1">// TODO - Developer: Manage error</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">execute</span><span class="p">()</span>
 <span class="n">cancellableCollector</span><span class="p">.</span><span class="nf">addCancellable</span><span class="p">(</span><span class="n">cancellable</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><strong>Note: Make sure to use the full implementation of <a href="https://github.com/openmobilehub/omh-storage/blob/release/1.0/storage-sample/src/main/java/com/omh/android/storage/sample/presentation/file_viewer/FileViewerViewModel.kt#L282-L302"><code class="language-plaintext highlighter-rouge">deleteFileEvent</code></a> for a fully functional sample.</strong></p>
  </li>
  <li>
    <p>Run the sample app to delete files.</p>
  </li>
</ol>

<h3 id="upload-files">Upload files</h3>
<p>For upload files, just use the instance you created of the <code class="language-plaintext highlighter-rouge">omhStorageClient</code> and call method <code class="language-plaintext highlighter-rouge">uploadFile</code> sending as parameter the local path of the file you want to upload and the id of the remote folder where you want to place it (parent id).</p>

<p>If you are configuring this step by step on the <code class="language-plaintext highlighter-rouge">code-starter</code> branch:</p>

<ol>
  <li>
    <p>Go to the <code class="language-plaintext highlighter-rouge">uploadFile</code> function in the <code class="language-plaintext highlighter-rouge">FileViewerViewModel</code> file. Look for the comment <code class="language-plaintext highlighter-rouge">// Add here snippet for upload files</code>, and replace the existing code below this comment with the following snippet:</p>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">val</span> <span class="py">cancellable</span> <span class="p">=</span> <span class="n">omhStorageClient</span><span class="p">.</span><span class="nf">uploadFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="n">parentId</span><span class="p">)</span>
             <span class="p">.</span><span class="nf">addOnSuccess</span> <span class="p">{</span> <span class="n">result</span><span class="p">:</span> <span class="nc">UploadFileUseCaseResult</span> <span class="p">-&gt;</span>
                <span class="c1">// An instance of OmhFile with the information of the uploaded file. In case the file was not uploaded, will be null</span>
                <span class="kd">val</span> <span class="py">file</span><span class="p">:</span> <span class="nc">OmhFile</span><span class="p">?</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">file</span>
                 <span class="c1">// TODO - Developer: Manage success</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">addOnFailure</span> <span class="p">{</span> <span class="n">exception</span><span class="p">:</span> <span class="nc">Exception</span> <span class="p">-&gt;</span>
                 <span class="c1">// TODO - Developer: Manage error</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">execute</span><span class="p">()</span>
 <span class="n">cancellableCollector</span><span class="p">.</span><span class="nf">addCancellable</span><span class="p">(</span><span class="n">cancellable</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><strong>Note: Make sure to use the full implementation of <a href="https://github.com/openmobilehub/omh-storage/blob/release/1.0/storage-sample/src/main/java/com/omh/android/storage/sample/presentation/file_viewer/FileViewerViewModel.kt#L240-L268"><code class="language-plaintext highlighter-rouge">uploadFile</code></a> for a fully functional sample.</strong></p>
  </li>
  <li>
    <p>Run the sample app to upload files.</p>
  </li>
</ol>

<h3 id="update-files">Update files</h3>
<p>For update files, just use the instance you created of the <code class="language-plaintext highlighter-rouge">omhStorageClient</code> and call method <code class="language-plaintext highlighter-rouge">updateFile</code> sending as parameter the local path of the file you want to update and the id of the remote file you want to replace (file id).</p>

<p>If you are configuring this step by step on the <code class="language-plaintext highlighter-rouge">code-starter</code> branch:</p>

<ol>
  <li>
    <p>Go to the <code class="language-plaintext highlighter-rouge">updateFileEvent</code> function in the <code class="language-plaintext highlighter-rouge">FileViewerViewModel</code> file. Look for the comment <code class="language-plaintext highlighter-rouge">// Add here snippet for update files</code>, and replace the existing code below this comment with the following snippet:</p>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">val</span> <span class="py">cancellable</span> <span class="p">=</span> <span class="n">omhStorageClient</span><span class="p">.</span><span class="nf">updateFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="n">fileId</span><span class="p">)</span>
             <span class="p">.</span><span class="nf">addOnSuccess</span> <span class="p">{</span> <span class="n">result</span><span class="p">:</span> <span class="nc">UpdateFileUseCaseResult</span> <span class="p">-&gt;</span>
                <span class="c1">// An instance of OmhFile with the information of the updated file. In case the file was not updated, will be null</span>
                <span class="kd">val</span> <span class="py">file</span><span class="p">:</span> <span class="nc">OmhFile</span><span class="p">?</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">file</span>
                 <span class="c1">// TODO - Developer: Manage success</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">addOnFailure</span> <span class="p">{</span> <span class="n">exception</span><span class="p">:</span> <span class="nc">Exception</span> <span class="p">-&gt;</span>
                 <span class="c1">// TODO - Developer: Manage error</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">execute</span><span class="p">()</span>
 <span class="n">cancellableCollector</span><span class="p">.</span><span class="nf">addCancellable</span><span class="p">(</span><span class="n">cancellable</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><strong>Note: Make sure to use the full implementation of <a href="https://github.com/openmobilehub/omh-storage/blob/release/1.0/storage-sample/src/main/java/com/omh/android/storage/sample/presentation/file_viewer/FileViewerViewModel.kt#L187-L219"><code class="language-plaintext highlighter-rouge">updateFileEvent</code></a> for a fully functional sample.</strong></p>
  </li>
  <li>
    <p>Run the sample app to update files.</p>
  </li>
</ol>

<h3 id="download-files">Download files</h3>
<p>For download files, just use the instance you created of the <code class="language-plaintext highlighter-rouge">omhStorageClient</code> and call method <code class="language-plaintext highlighter-rouge">createFile</code> sending as parameter the id of the file you want to download and the mime type you desire to have locally (once downloaded)</p>

<p>If you are configuring this step by step on the <code class="language-plaintext highlighter-rouge">code-starter</code> branch:</p>

<ol>
  <li>
    <p>Go to the <code class="language-plaintext highlighter-rouge">downloadFileEvent</code> function in the <code class="language-plaintext highlighter-rouge">FileViewerViewModel</code> file. Look for the comment <code class="language-plaintext highlighter-rouge">// Add here snippet for download files</code>, and replace the existing code below this comment with the following snippet:</p>

    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">val</span> <span class="py">cancellable</span> <span class="p">=</span> <span class="n">omhStorageClient</span><span class="p">.</span><span class="nf">downloadFile</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">mimeTypeToSave</span><span class="p">)</span>
             <span class="p">.</span><span class="nf">addOnSuccess</span> <span class="p">{</span> <span class="n">result</span><span class="p">:</span> <span class="nc">DownloadFileUseCaseResult</span> <span class="p">-&gt;</span>
                <span class="c1">// An instance of ByteArrayOutputStream with the downloaded file</span>
                <span class="kd">val</span> <span class="py">outputStream</span><span class="p">:</span> <span class="nc">ByteArrayOutputStream</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">outputStream</span>
                 <span class="c1">// TODO - Developer: Manage success</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">addOnFailure</span> <span class="p">{</span> <span class="n">exception</span><span class="p">:</span> <span class="nc">Exception</span> <span class="p">-&gt;</span>
                <span class="c1">// TODO - Developer: Manage error</span>
             <span class="p">}</span>
             <span class="p">.</span><span class="nf">execute</span><span class="p">()</span>
 <span class="n">cancellableCollector</span><span class="p">.</span><span class="nf">addCancellable</span><span class="p">(</span><span class="n">cancellable</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><strong>Note: Make sure to use the full implementation of <a href="https://github.com/openmobilehub/omh-storage/blob/release/1.0/storage-sample/src/main/java/com/omh/android/storage/sample/presentation/file_viewer/FileViewerViewModel.kt#L143-L185"><code class="language-plaintext highlighter-rouge">downloadFileEvent</code></a> for a fully functional sample.</strong></p>
  </li>
  <li>
    <p>Run the sample app to download files.</p>
  </li>
</ol>

<h1 id="sample-app-all-feature-demonstration">Sample App: All-Feature Demonstration</h1>
<p>This repository also contains a <a href="/storage-sample">Storage-sample</a>, which demonstrates all the functionalities of the OMH Storage Client Library. To get started, follow these steps:</p>

<ol>
  <li>Clone the repository to your local machine.</li>
  <li>Set up your Google Cloud project. You can refer to the <a href="#set-up-your-google-cloud-project-for-applications-with-google-services-google-auth">instructions</a> for guidance.</li>
  <li>Add the client id to your app using the instructions provided <a href="https://github.com/openmobilehub/omh-storage#set-up-your-google-cloud-project-for-applications-with-google-services-google-auth">here</a>.</li>
  <li>Set the variant to <code class="language-plaintext highlighter-rouge">debugSingleBuild</code></li>
  <li>Run the <code class="language-plaintext highlighter-rouge">storage-sample</code> on your device</li>
</ol>

<p>However, if you prefer a more structured approach to learn the client library from scratch, it’s recommended to begin with the <a href="#getting-started">Getting Started section</a>.</p>

<h1 id="documentation">Documentation</h1>
<p>See example and check the full documentation and add custom implementation at our <a href="https://github.com/openmobilehub/omh-storage/wiki">Wiki</a>.</p>

<p>Additionally for more information about the OMH Storage functions, <a href="https://openmobilehub.github.io/omh-storage">Docs</a>.</p>

<h1 id="provider-implementations--plugins">Provider Implementations / Plugins</h1>
<p>OMH Storage SDK is open-source, promoting community collaboration and plugin support from other storage providers to enhance capabilities and expand supported storage services. More details can be found at <a href="https://github.com/openmobilehub/omh-storage/wiki/Creating-a-custom-implementation">the wiki</a>.</p>

<h1 id="contributing">Contributing</h1>
<p>Please contribute! We will gladly review any pull requests. Make sure to read the <a href="https://github.com/openmobilehub/omh-storage/blob/main/CONTRIBUTING.md">CONTRIBUTING</a> page first though.</p>

<h1 id="license">License</h1>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Copyright 2023 Open Mobile Hub
 
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre></div></div>

      </div>
      </div>
      
    </div>
  </div>
</div>


<div class="strip strip-light-blue">
  <div class="container pt-6 pb-6 pt-md-10 pb-md-10">
    <div class="row justify-content-center">

      
      
      <div class="col-12 col-md-6 col-lg-6 mb-2">
        <div class="library reveal fade-bottom">
          
          <div class="library-image"><a href="/libraries/loginauth/"><img alt="Login & Authentication SDK logo" src="/images/libraries/login.png" width="120" height="120" /></a></div>
          
          <h2 class="library-title">Login & Authentication SDK</h2>
          <div class="library-content">OMH Auth is a client library that makes it easy to integrate auth providers on all types of devices running different OS platforms. It eliminates the need for separate codebases for different app builds.</div>
          
          <h2 class="library-title">Plugin</h2>
          <div class="library-content"><ul><li><a href="https://github.com/openmobilehub/omh-auth/tree/main/auth-api-gms">Auth GMS Plugin</a></li><li><a href="https://github.com/openmobilehub/omh-auth/tree/main/auth-api-non-gms">Auth Non-GMS Plugin</a></li></ul></div>
          
          <br/><br/><a href="/libraries/loginauth/"><button class="button" role="button">More Info</button></a>

        </div>
      </div>
      
      
      
      <div class="col-12 col-md-6 col-lg-6 mb-2">
        <div class="library reveal fade-bottom">
          
          <div class="library-image"><a href="/libraries/maps/"><img alt="Maps & Location SDK logo" src="/images/libraries/map.png" width="120" height="120" /></a></div>
          
          <h2 class="library-title">Maps & Location SDK</h2>
          <div class="library-content">OMH Maps is a client library that makes it easy to integrate maps on all types of devices running different OS platforms. It eliminates the need for separate codebases for different app builds.</div>
          
          <h2 class="library-title">Plugin</h2>
          <div class="library-content"><ul><li><a href="https://github.com/openmobilehub/omh-maps/tree/main/maps-api-googlemaps">Google Maps GMS Plugin</a></li><li><a href="https://github.com/openmobilehub/omh-maps/tree/main/maps-api-openstreetmap">OpenStreetMap Non-GMS Plugin</a></li></ul></div>
          
          <br/><br/><a href="/libraries/maps/"><button class="button" role="button">More Info</button></a>

        </div>
      </div>
      
      
      
      
      
      <div class="col-12 col-md-6 col-lg-6 mb-2">
        <div class="library reveal fade-bottom">
          
          <div class="library-image"><a href="/libraries/core_plugin/"><img alt="Core Gradle Plugin logo" src="/images/libraries/core.png" width="120" height="120" /></a></div>
          
          <h2 class="library-title">Core Gradle Plugin</h2>
          <div class="library-content">The OMH Core is an essential Gradle plugin designed to streamline the configuration, enabling, and setup of OMH Client Libraries within developers’ projects. With this plugin, developers can effortlessly incorporate the necessary dependencies and activate custom-build variants, facilitating the compilation of various builds that leverage the defined providers.</div>
          
          <br/><br/><a href="/libraries/core_plugin/"><button class="button" role="button">More Info</button></a>

        </div>
      </div>
      
      

    </div>
  </div>
</div>



  </div>
  <div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="footer-inner">
          <h2 class="footer-title">Open Mobile Hub</h2>
          <ul>
            
            
            <li class="">
              <a href="/">Home</a>
            </li>
            
            <li class="">
              <a href="/contact/">Contact</a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          
            <div class="social">
  
    <a href="https://github.com/openmobilehub" target="blank"><img src="/images/social/github.svg" title="Github" alt="Github" /></a>
  
    <a href="https://www.linkedin.com/company/open-mobile-hub/?viewAsMember=true" target="blank"><img src="/images/social/linkedin-logo.png" title="LinkedIn" alt="LinkedIn" /></a>
  
    <a href="https://twitter.com/openmobilehub" target="blank"><img src="/images/social/x-logo.svg" title="X" alt="X" /></a>
  
    <a href="https://discord.gg/yTAFKbeVMw" target="blank"><img src="/images/social/discord-mark-white.png" title="Discord" alt="Discord" /></a>
  
  
  <div class="copyright">© 2023 Open Mobile Hub</div>
  
</div>

          
        </div>
      </div>
    </div>
  </div>
</div>

  <script type="text/javascript" src="/assets/js/scripts.js"></script>
  
</body>
</html>
